(function(e){function t(t){for(var i,s,o=t[0],c=t[1],l=t[2],p=0,d=[];p<o.length;p++)s=o[p],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},a={app:0},r=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"17c3":function(e,t,n){"use strict";n("aa18")},"1d85":function(e,t,n){"use strict";n("6ed5")},"29f2":function(e,t,n){"use strict";n("baf6")},"2c34":function(e,t,n){"use strict";n("a956")},"2d3e":function(e,t,n){},"2e90":function(e,t,n){"use strict";n("9d5f")},"32b7":function(e,t,n){"use strict";n("f6dc")},"33c6":function(e,t,n){},3693:function(e,t,n){"use strict";n("c3ee")},4480:function(e,t,n){"use strict";n("33c6")},5187:function(e,t,n){"use strict";n("a263")},5267:function(e,t,n){"use strict";n("e1f0")},5379:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var i=n("1da1"),a=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("96cf"),n("d3b7"),n("2ca0"),n("2b0e")),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view"),n("div",{staticClass:"alerts"},e._l(e.alerts,(function(e){return n("Alert",{key:e.id,attrs:{alert:e}})})),1)],1)},s=[],o=n("5530"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"alert"},[n("p",[e._v(e._s(this.alert.title))]),e._l(this.alert.text,(function(t){return n("p",{key:t},[e._v(e._s(t))])}))],2)},l=[],u={name:"alert",props:{alert:Object}},p=u,d=(n("17c3"),n("2877")),f=Object(d["a"])(p,c,l,!1,null,"1c252216",null),h=f.exports,v=n("2f62"),g={name:"App",components:{Alert:h},computed:Object(o["a"])({},Object(v["c"])({alerts:function(e){return e.alerts.alerts}})),mounted:function(){var e=this;this.$store.dispatch("startup").catch((function(t){e.$router.push("/login")}))}},m=g,y=(n("5c0b"),Object(d["a"])(m,r,s,!1,null,null,null)),b=y.exports,P=n("8c4f"),w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("Sidebar",{staticClass:"sidebar"}),n("Map",{staticClass:"map"})],1)},x=[],C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"component",staticClass:"map",style:e.mapStyle,on:{mousedown:e.onMouseDown,mouseup:e.stopMoving,mousemove:e.onMouseMove,wheel:e.zoom,click:e.useTool}},[n("div",{ref:"map",staticClass:"mapContent",style:e.mapPositionStyle},[n("img",{ref:"image",staticClass:"image",attrs:{src:""+e.mapImageSrc,alt:""}}),e._l(e.pins,(function(t){return n("Pin",{key:t.id,style:e.pinStyle,attrs:{pin:t}})}))],2),n("IconButton",{staticClass:"addBtn",attrs:{primary:!0},on:{click:e.selectAddTool}},[e._v("add")]),n("Dialog",{staticClass:"addPinDialog",attrs:{title:"Create new pin",open:e.addPinDialogOpen},on:{close:e.closeAddPinDialog}},[n("TextInput",{attrs:{label:"Name"},model:{value:e.newPin.title,callback:function(t){e.$set(e.newPin,"title",t)},expression:"newPin.title"}}),n("TextInput",{attrs:{label:"Image-url"},model:{value:e.newPin.imageUrl,callback:function(t){e.$set(e.newPin,"imageUrl",t)},expression:"newPin.imageUrl"}}),n("TextInput",{attrs:{label:"Description"},model:{value:e.newPin.description,callback:function(t){e.$set(e.newPin,"description",t)},expression:"newPin.description"}}),n("Dropdown",{attrs:{value:this.newPin.category.title,values:e.categories,label:"Category"},on:{change:this.setNewPinCategory,createValue:e.createNewCategory},scopedSlots:e._u([{key:"value",fn:function(t){var i=t.value;return[n("p",[e._v(e._s(i.title+" "+(i.private?" (private)":"")))])]}}])}),n("Dropdown",{attrs:{value:this.newPin.type.title,values:e.types,label:"Type"},on:{change:this.setNewPinType,createValue:e.createNewType},scopedSlots:e._u([{key:"value",fn:function(t){var i=t.value;return[n("p",[e._v(e._s(i.title+" "+(i.private?" (private)":"")))])]}}])}),e.noCategory?n("p",{staticClass:"error"},[e._v("Please select or create a category.")]):e._e(),e.noType?n("p",{staticClass:"error"},[e._v("Please select or create a type.")]):e._e(),n("Button",{attrs:{primary:"",label:"Add"},on:{click:e.addPin}})],1)],1)},_=[],T=(n("99af"),n("d81d"),n("b0c0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pin",style:e.pinStyle},[n("div",{staticClass:"clicky",on:{click:e.toggleDetails}},[n("span",{staticClass:"material-icons pinIcon"},[e._v("place")])]),e.detailsOpen?n("div",{staticClass:"details"},[n("div",{staticClass:"detailsHeader"},[n("p",{staticClass:"pinTitle"},[e._v(" "+e._s(this.editing?"Edit pin":this.pin.title||"Untitled Pin")+" ")]),n("div",{staticClass:"headerBtns"},[e.pin.private&&!this.editing?n("span",{staticClass:"material-icons editBtn headerBtn",on:{click:e.editPin}},[e._v("edit")]):e._e(),n("span",{staticClass:"material-icons closeBtn headerBtn",on:{click:e.toggleDetails}},[e._v("close")])])]),this.editing?e._e():n("div",{staticClass:"detailsContent"},[this.pin.description||this.pin.imageUrl?e._e():n("div",{staticClass:"placeholder"},[n("p",[e._v("This pin does not have a description")])]),this.pin.imageUrl?n("div",{staticClass:"imageContainer"},[n("img",{attrs:{src:this.pin.imageUrl,alt:""}})]):e._e(),this.pin.description?n("p",{staticClass:"description"},[e._v(" "+e._s(this.pin.description)+" ")]):e._e()]),this.editing?n("div",{staticClass:"detailsContent"},[n("TextInput",{attrs:{label:"Title"},model:{value:e.editedPin.title,callback:function(t){e.$set(e.editedPin,"title",t)},expression:"editedPin.title"}}),n("TextInput",{attrs:{label:"Image-url"},model:{value:e.editedPin.imageUrl,callback:function(t){e.$set(e.editedPin,"imageUrl",t)},expression:"editedPin.imageUrl"}}),n("TextInput",{attrs:{label:"Description"},model:{value:e.editedPin.description,callback:function(t){e.$set(e.editedPin,"description",t)},expression:"editedPin.description"}}),n("Dropdown",{attrs:{value:this.editedPin.category.title,values:e.categories,label:"Category"},on:{change:this.setCategory,createValue:e.createNewCategory},scopedSlots:e._u([{key:"value",fn:function(t){var i=t.value;return[n("p",[e._v(e._s(i.title+" "+(i.private?" (private)":"")))])]}}],null,!1,3186276857)}),n("Dropdown",{attrs:{value:this.editedPin.type.title,values:e.types,label:"Type"},on:{change:this.setType,createValue:e.createNewType},scopedSlots:e._u([{key:"value",fn:function(t){var i=t.value;return[n("p",[e._v(e._s(i.title+" "+(i.private?" (private)":"")))])]}}],null,!1,3186276857)}),n("div",{staticClass:"horizontalFlex right gap10"},[n("Button",{attrs:{label:e.deleteBtnText},on:{click:e.deletePin}}),n("Button",{attrs:{label:"Cancel"},on:{click:e.cancelEditing}}),n("Button",{attrs:{primary:!0,label:"Save"},on:{click:e.saveChanges}})],1)],1):e._e()]):e._e()])}),O=[],k=(n("7db0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:this.classes,on:{click:this.click}},[n("p",{staticClass:"label"},[e._v(e._s(this.label))])])}),D=[],j={name:"CustomButton",props:{primary:{type:Boolean,default:!1},label:String},computed:{classes:function(){return{buttonPrimary:this.primary,buttonSecondary:!this.primary}}},methods:{click:function(e){this.$emit("click",e)}}},S=j,I=(n("5267"),Object(d["a"])(S,k,D,!1,null,"241fea80",null)),$=I.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:this.inputClasses},[n("label",{style:this.labelStyles},[e._v(e._s(this.label))]),n("input",{ref:"input",attrs:{type:this.type},domProps:{value:this.value},on:{input:this.onInput,focus:this.activate,blur:this.deactivate,keypress:this.keypress}})])},R=[],A={name:"textinput",model:{prop:"value",event:"change"},props:{label:String,value:String,password:{type:Boolean,default:!1}},data:function(){return{active:!1}},methods:{onInput:function(e){this.$emit("change",e.target.value),this.$emit("input",e)},activate:function(){this.active=!0},deactivate:function(){this.active=!1},focus:function(){this.$refs.input.focus()},keypress:function(e){this.$emit("keypress",e)}},computed:{type:function(){return this.password?"password":"text"},empty:function(){return""==this.value&&!this.active},labelStyles:function(){return{"font-size":this.empty?"16px":"11px",transform:this.empty?"":"translate(3px, -16px)"}},inputClasses:function(){return{textinput:!0,active:this.active}}}},B=A,M=(n("f6d0"),Object(d["a"])(B,E,R,!1,null,"445d2b89",null)),N=M.exports,L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:this.classes},[n("div",{staticClass:"select",on:{click:e.toggle}},[n("p",{staticClass:"value"},[e._v(e._s(this.value||this.label))]),n("span",{staticClass:"material-icons"},[e._v(e._s(this.open?"expand_less":"expand_more"))])]),this.open?n("div",{staticClass:"values"},[e._l(e.values,(function(t){return n("div",{key:JSON.stringify(t),staticClass:"value",attrs:{"data-value":JSON.stringify(t)},on:{click:e.selectValue}},[e._t("value",null,{value:t})],2)})),e.canCreateValue?n("div",{staticClass:"valueInput"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newValue,expression:"newValue"}],attrs:{type:"text",placeholder:e.newValuePlaceHolder},domProps:{value:e.newValue},on:{keypress:e.onNewValueKeypress,input:function(t){t.target.composing||(e.newValue=t.target.value)}}})]):e._e()],2):e._e()])},V=[],U={name:"dropdown",model:{prop:"value",event:"change"},props:{label:String,value:String,values:Array,canCreateValue:{type:Boolean,default:!0},newValuePlaceHolder:{type:String,default:"New Value"}},data:function(){return{active:!1,open:!1,newValue:""}},methods:{activate:function(){this.active=!0},deactivate:function(){this.active=!1},toggle:function(){this.open=!this.open},selectValue:function(e){this.$emit("change",e.currentTarget.dataset.value),this.open=!1},onNewValueKeypress:function(e){"Enter"==e.code&&this.$emit("createValue",this.newValue)}},computed:{labelStyles:function(){return{}},classes:function(){return{dropdown:!0,open:this.open}}}},J=U,H=(n("aae3"),Object(d["a"])(J,L,V,!1,null,"914f6c10",null)),F=H.exports,z=n("fa7d"),Y={name:"pin",components:{Button:$,TextInput:N,Dropdown:F},props:{pin:Object},data:function(){return{detailsOpen:!1,editing:!1,editedPin:{title:"",description:"",category:{},type:{}},confirmDelete:!1}},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(v["c"])({activeArea:function(e){return e.mapLocations[e.mapLocationIndex]},categories:function(e){return e.pins.categories},types:function(e){return e.pins.types}})),Object(v["b"])(["getType"])),{},{visible:function(){return this.getType(this.pin.typeId).visible&&this.activeArea.name==this.pin.area},pinStyle:function(){return{"margin-left":"".concat(this.pin.x,"px"),"margin-top":"".concat(this.pin.y,"px"),display:this.visible?"initial":"none"}},deleteBtnText:function(){return this.confirmDelete?"Confirm deletion":"Delete pin"}}),mounted:function(){},methods:{toggleDetails:function(){this.detailsOpen=!this.detailsOpen,this.detailsOpen||this.cancelEditing()},editPin:function(){var e=this;this.editedPin=Object(o["a"])(Object(o["a"])({},this.pin),{},{category:this.categories.find((function(t){return t.id==e.pin.categoryId})),type:this.types.find((function(t){return t.id==e.pin.typeId})),edited:!0}),this.editing=!0},deletePin:function(){this.confirmDelete?(this.$store.dispatch("deletePrivatePin",this.pin),this.confirmDelete=!1):this.confirmDelete=!0},saveChanges:function(){this.$store.dispatch("updatePrivatePin",this.editedPin),this.editing=!1,this.confirmDelete=!1},cancelEditing:function(){this.editing=!1,this.confirmDelete=!1},createNewType:function(e){var t=Object(z["genRandHex"])(20);this.editedPin.type={title:e,id:"private_".concat(t),visible:!0}},createNewCategory:function(e){var t=Object(z["genRandHex"])(20);this.editedPin.category={title:e,id:"private_".concat(t),visible:!0}},setCategory:function(e){var t=JSON.parse(e);this.editedPin.categoryId=t.id,this.category=t},setType:function(e){var t=JSON.parse(e);this.editedPin.typeId=t.id,this.type=t}}},W=Y,X=(n("64ff"),Object(d["a"])(W,T,O,!1,null,"06b3c668",null)),K=X.exports,q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:this.classes,on:{click:this.click}},[n("span",{staticClass:"material-icons"},[e._t("default")],2)])},G=[],Q={name:"CustomButton",props:{primary:{type:Boolean,default:!1}},computed:{classes:function(){return{buttonPrimary:this.primary,buttonSecondary:!this.primary}}},methods:{click:function(e){this.$emit("click",e)}}},Z=Q,ee=(n("6aaf"),Object(d["a"])(Z,q,G,!1,null,"36ad7850",null)),te=ee.exports,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.open?n("div",{staticClass:"dialogWrapper"},[n("div",{staticClass:"clickAwayListener",on:{click:e.close}}),n("div",{staticClass:"dialog"},[n("div",{staticClass:"titleBar"},[n("p",{staticClass:"title"},[e._v(e._s(e.title))]),n("span",{staticClass:"material-icons closeBtn",on:{click:e.close}},[e._v("close")])]),n("div",{staticClass:"dialogContent"},[e._t("default")],2)])]):e._e()},ie=[],ae={name:"CustomDialog",props:{title:String,open:Boolean},methods:{close:function(){this.$emit("close")}}},re=ae,se=(n("32b7"),Object(d["a"])(re,ne,ie,!1,null,"4b060170",null)),oe=se.exports,ce={name:"movableMap",components:{Pin:K,Dropdown:F,Button:$,TextInput:N,IconButton:te,Dialog:oe},data:function(){return{moving:!1,mapPosition:{x:0,y:0},mouseDownPosition:{x:0,y:0},prevMapPosition:{x:0,y:0},canMove:!0,mapScale:1,addPinDialogOpen:!1,newPin:{title:"",description:"",imageUrl:"",category:{},type:{},x:0,y:0}}},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(v["c"])({activeArea:function(e){return e.mapLocations[e.mapLocationIndex]},categories:function(e){return e.pins.categories},types:function(e){return e.pins.types},pins:function(e){return e.pins.pins}})),Object(v["b"])(["privateCategories","privateTypes","privatePins"])),{},{mapPositionStyle:function(){return{transform:"scale(".concat(this.mapScale,") translate(").concat(this.mapPosition.x,"px, ").concat(this.mapPosition.y,"px)")}},mapImageSrc:function(){return this.$store.state.mapLocations[this.$store.state.mapLocationIndex].path},mapStyle:function(){return{cursor:this.canMove?this.moving?"grabbing":"grab":"crosshair"}},pinStyle:function(){return{transform:"scale(".concat(1/this.mapScale,") translate(-").concat(18*this.mapScale,"px, -").concat(18*this.mapScale,"px)")}},noCategory:function(){return void 0==this.newPin.category.id},noType:function(){return void 0==this.newPin.type.id}}),methods:{onMouseDown:function(e){this.canMove&&(this.moving=!0,this.mouseDownPosition.x=e.clientX,this.mouseDownPosition.y=e.clientY,this.prevMapPosition=Object(o["a"])({},this.mapPosition))},stopMoving:function(){this.moving=!1},onMouseMove:function(e){this.moving&&this.canMove&&this.moveMap(e),e.preventDefault()},moveMap:function(e){this.mapPosition.x=this.prevMapPosition.x+(e.clientX-this.mouseDownPosition.x)/this.mapScale,this.mapPosition.y=this.prevMapPosition.y+(e.clientY-this.mouseDownPosition.y)/this.mapScale},zoom:function(e){this.canMove&&(e.deltaY>0?this.mapScale*=.9:(this.mapScale*=1.1,this.mapPosition))},selectAddTool:function(){var e=this;setTimeout((function(){e.canMove=!1}),100),window.addEventListener("keydown",this.cancelTool)},useTool:function(e){if(!this.canMove&&!this.addPinDialogOpen){this.mouseDownPosition.x=e.clientX,this.mouseDownPosition.y=e.clientY;var t=this.$refs.map.getBoundingClientRect();this.newPin.x=(e.clientX-t.x)/this.mapScale,this.newPin.y=(e.clientY-t.y)/this.mapScale,this.openAddPinDialog()}},cancelTool:function(e){"Escape"==e.code&&(this.canMove=!0,window.removeEventListener("keydown",this.cancelTool))},openAddPinDialog:function(){this.addPinDialogOpen=!0},closeAddPinDialog:function(){this.canMove=!0,this.addPinDialogOpen=!1},addPin:function(){if(!this.noCategory&&!this.noType){var e=Object(z["genRandHex"])(20),t=Object(o["a"])(Object(o["a"])({},this.newPin),{},{id:"private_".concat(e),area:this.activeArea.name});this.$store.dispatch("addPrivatePin",t),this.closeAddPinDialog()}},createNewType:function(e){var t=Object(z["genRandHex"])(20);this.newPin.type={title:e,id:"private_".concat(t),visible:!0}},createNewCategory:function(e){var t=Object(z["genRandHex"])(20);this.newPin.category={title:e,id:"private_".concat(t),visible:!0}},setNewPinCategory:function(e){var t=JSON.parse(e);this.newPin.categoryId=t.id,this.newPin.category=t},setNewPinType:function(e){var t=JSON.parse(e);this.newPin.typeId=t.id,this.newPin.type=t}}},le=ce,ue=(n("2e90"),Object(d["a"])(le,C,_,!1,null,"f90c638c",null)),pe=ue.exports,de=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sidebar"},[n("div",{staticClass:"locations"},[n("Tabs",{attrs:{values:e.mapLocations.map((function(e){return e.name})),index:this.$store.state.mapLocationIndex},on:{change:e.changeMapLocation}})],1),n("p",[e._v("Categories")]),e._l(e.categories,(function(t){return n("FoldableSection",{key:t.id,staticClass:"category",scopedSlots:e._u([{key:"header",fn:function(i){return[n("p",{staticClass:"title"},[e._v(e._s(t.title+" "+(t.private?"(private)":"")))]),n("div",{staticClass:"headerBtns"},[t.private?n("span",{staticClass:"material-icons editBtn toggleBtn",on:{click:function(n){return n.stopPropagation(),e.editCategory(t)}}},[e._v(" edit ")]):e._e(),n("span",{staticClass:"material-icons"},[e._v(e._s(i.open?"expand_less":"expand_more"))])])]}},{key:"content",fn:function(){return e._l(e.getCategoryTypes(t.id),(function(t){return n("div",{key:t.id,staticClass:"toggleWrapper"},[n("ToggleSwitch",{attrs:{on:t.visible,label:t.title+" "+(t.private?"(private)":"")+" ("+e.getTypePins(t.id).length+")"},on:{change:function(){e.toggleType(t)}}}),t.private?n("span",{staticClass:"material-icons editBtn toggleBtn",on:{click:function(n){return e.editType(t)}}},[e._v(" edit ")]):e._e()],1)}))},proxy:!0}],null,!0)})})),n("Dialog",{staticClass:"editTypeDialog editDialog",attrs:{open:e.editTypeDialogOpen,title:"Edit type"},on:{close:e.closeEditTypeDialog}},[n("TextInput",{attrs:{label:"Title"},model:{value:e.editableType.title,callback:function(t){e.$set(e.editableType,"title",t)},expression:"editableType.title"}}),n("TextInput",{attrs:{label:"Description"},model:{value:e.editableType.description,callback:function(t){e.$set(e.editableType,"description",t)},expression:"editableType.description"}}),n("Dropdown",{attrs:{value:this.editableType.category.title,values:e.categories,label:"Category"},on:{change:this.setTypeCategory,createValue:e.createNewCategory},scopedSlots:e._u([{key:"value",fn:function(t){var i=t.value;return[n("p",[e._v(e._s(i.title+" "+(i.private?" (private)":"")))])]}}])}),n("div",{staticClass:"horizontalFlex gap10 right"},[n("Button",{attrs:{label:e.deleteTypeBtnLabel},on:{click:e.deleteEditableType}}),n("Button",{attrs:{primary:"",label:"Save"},on:{click:e.saveEditableType}})],1)],1),n("Dialog",{staticClass:"editCategoryDialog editDialog",attrs:{open:e.editCategoryDialogOpen,title:"Edit type"},on:{close:e.closeEditCategoryDialog}},[n("TextInput",{attrs:{label:"Title"},model:{value:e.editableCategory.title,callback:function(t){e.$set(e.editableCategory,"title",t)},expression:"editableCategory.title"}}),n("TextInput",{attrs:{label:"Description"},model:{value:e.editableCategory.description,callback:function(t){e.$set(e.editableCategory,"description",t)},expression:"editableCategory.description"}}),n("div",{staticClass:"horizontalFlex gap10 right"},[n("Button",{attrs:{label:e.deleteCategoryBtnLabel},on:{click:e.deleteEditableCategory}}),n("Button",{attrs:{primary:"",label:"Save"},on:{click:e.saveEditableCategory}})],1)],1)],2)},fe=[],he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"foldableSection"},[n("div",{staticClass:"sectionHeader",on:{click:e.toggle}},[e._t("header",(function(){return[n("p",{staticClass:"title"},[e._v(e._s(e.title))]),n("span",{staticClass:"material-icons"},[e._v(e._s(e.open?"expand_less":"expand_more"))])]}),{open:e.open})],2),this.open?n("div",{staticClass:"content"},[e._t("content")],2):e._e()])},ve=[],ge={name:"foldableSection",props:{title:String},data:function(){return{open:!0}},methods:{toggle:function(){this.open=!this.open}}},me=ge,ye=(n("9824"),Object(d["a"])(me,he,ve,!1,null,"4e77738a",null)),be=ye.exports,Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"toggleSwitch",on:{click:e.toggle}},[n("span",{staticClass:"material-icons"},[e._v(e._s(this.on?"check_box":"check_box_outline_blank"))]),n("p",[e._v(e._s(this.label))])])},we=[],xe={name:"ToggleSwitch",model:{event:"change",prop:"on"},props:{on:Boolean,label:String},methods:{toggle:function(){this.$emit("change",!this.on)}}},Ce=xe,_e=(n("3693"),Object(d["a"])(Ce,Pe,we,!1,null,"e90ed4c8",null)),Te=_e.exports,Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tabs"},e._l(e.values,(function(t,i){return n("div",{key:t,class:e.classes(t),attrs:{"data-index":i},on:{click:e.select}},[e._v(" "+e._s(t)+" ")])})),0)},ke=[],De=(n("a9e3"),n("ddb0"),{name:"tabs",props:{values:Array,index:Number},methods:{select:function(e){this.$emit("change",parseInt(e.target.dataset.index))},classes:function(e){return{tab:!0,active:e===this.values[this.index]}}}}),je=De,Se=(n("29f2"),Object(d["a"])(je,Oe,ke,!1,null,"389c8010",null)),Ie=Se.exports,$e={name:"sidebar",components:{Button:$,Tabs:Ie,FoldableSection:be,ToggleSwitch:Te,Dialog:oe,Dropdown:F,TextInput:N},data:function(){return{editTypeDialogOpen:!1,editableType:{id:"",title:"",description:"",category:{},categoryId:""},confirmTypeDelete:!1,editCategoryDialogOpen:!1,editableCategory:{id:"",title:"",description:""},confirmCategoryDelete:!1}},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(v["b"])(["getCategoryTypes","getTypePins"])),Object(v["c"])({mapLocations:function(e){return e.mapLocations},categories:function(e){return e.pins.categories},types:function(e){return e.pins.types}})),{},{deleteTypeBtnLabel:function(){return this.confirmTypeDelete?"Confirm deletion":"Delete type"},deleteCategoryBtnLabel:function(){return this.confirmCategoryDelete?"Confirm deletion":"Delete Category"}}),methods:{changeMapLocation:function(e){this.$store.commit("setMapLocationIndex",e)},toggleType:function(e){e.visible=!e.visible,this.$store.commit("updateType",e)},editType:function(e){this.editableType=Object(o["a"])(Object(o["a"])({},e),{},{category:this.categories.find((function(t){return t.id===e.categoryId}))}),this.editTypeDialogOpen=!0},deleteEditableType:function(){this.confirmTypeDelete?(this.$store.dispatch("deletePrivateType",this.editableType),this.confirmTypeDelete=!1,this.closeEditTypeDialog()):this.confirmTypeDelete=!0},closeEditTypeDialog:function(){this.editTypeDialogOpen=!1},saveEditableType:function(){this.closeEditTypeDialog(),this.$store.dispatch("updatePrivateType",Object(o["a"])({},this.editableType))},createNewCategory:function(e){var t=Object(z["genRandHex"])(20);this.editableType.category={title:e,id:"private_".concat(t),visible:!0}},setTypeCategory:function(e){var t=JSON.parse(e);this.editableType.categoryId=t.id,this.editableType.category=t},editCategory:function(e){this.editableCategory=Object(o["a"])({},e),this.editCategoryDialogOpen=!0},closeEditCategoryDialog:function(){this.editCategoryDialogOpen=!1},deleteEditableCategory:function(){this.confirmCategoryDelete?(this.$store.dispatch("deletePrivateCategory",this.editableCategory),this.confirmCategoryDelete=!1,this.closeEditCategoryDialog()):this.confirmCategoryDelete=!0},saveEditableCategory:function(){this.$store.dispatch("updatePrivateCategory",Object(o["a"])({},this.editableCategory))}}},Ee=$e,Re=(n("2c34"),Object(d["a"])(Ee,de,fe,!1,null,"44574a2a",null)),Ae=Re.exports,Be={name:"Home",components:{Map:pe,Sidebar:Ae}},Me=Be,Ne=(n("f4e7"),Object(d["a"])(Me,w,x,!1,null,"ecb3ce38",null)),Le=Ne.exports,Ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("h1",[e._v("Login")]),n("TextInput",{attrs:{label:"E-mail"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),n("TextInput",{attrs:{label:"Password",password:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("Button",{attrs:{primary:"",label:"Login"},on:{click:e.login}})],1)},Ue=[],Je={name:"login",components:{Button:$,TextInput:N},data:function(){return{password:"",email:""}},methods:{login:function(){var e=this;this.$store.dispatch("login",{password:this.password,email:this.email}).then((function(t){e.$router.push("/")}))}}},He=Je,Fe=(n("4480"),Object(d["a"])(He,Ve,Ue,!1,null,"578f05e0",null)),ze=Fe.exports,Ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("h1",[e._v("Register")]),n("TextInput",{attrs:{label:"E-mail"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),n("TextInput",{attrs:{label:"Username"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("TextInput",{attrs:{label:"Password",password:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("TextInput",{attrs:{label:"Repeat password",password:""},model:{value:e.passwordRepeat,callback:function(t){e.passwordRepeat=t},expression:"passwordRepeat"}}),n("TextInput",{attrs:{label:"Register code",password:""},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),n("Button",{attrs:{primary:"",label:"Register"},on:{click:e.register}})],1)},We=[],Xe={name:"register",components:{Button:$,TextInput:N},data:function(){return{password:"",passwordRepeat:"",username:"",email:"",code:""}},methods:{register:function(){var e=this;this.$store.dispatch("register",{email:this.email,username:this.username,password:this.password,passwordRepeat:this.passwordRepeat,referenceCode:this.code}).then((function(t){e.$router.push("/")}))}}},Ke=Xe,qe=(n("5187"),Object(d["a"])(Ke,Ye,We,!1,null,"04475882",null)),Ge=qe.exports,Qe=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Ze=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"logout"},[n("h1",[e._v("You are now logged out")])])}],et={name:"Logout",mounted:function(){var e=this;this.$nextTick((function(){e.$store.dispatch("logout").then((function(t){e.$router.push("/")}))}))}},tt=et,nt=(n("1d85"),Object(d["a"])(tt,Qe,Ze,!1,null,null,null)),it=nt.exports;a["a"].use(P["a"]);var at=[{path:"/",name:"Home",component:Le},{path:"/login",name:"Login",component:ze},{path:"/register",name:"Register",component:Ge},{path:"/logout",name:"Logout",component:it}],rt=new P["a"]({mode:"history",base:"/",routes:at}),st=rt,ot=(n("a434"),n("159b"),n("4de4"),n("e9c4"),n("bc3a")),ct=n.n(ot),lt={state:function(){return{categories:[],types:[],pins:[]}},mutations:{setCategories:function(e,t){e.categories=t},setTypes:function(e,t){e.types=t},setPins:function(e,t){e.pins=t},addPrivateType:function(e,t){t.private=!0,e.types.push(t)},updateType:function(e,t){var n=e.types.indexOf(e.types.find((function(e){return e.id===t.id})));Object.assign(e.types[n],t)},deletePrivateType:function(e,t){var n=e.types.indexOf(e.types.find((function(e){return e.id===t.id})));e.types.splice(n,1)},updatePrivateType:function(e,t){var n=e.types.indexOf(e.types.find((function(e){return e.id===t.id})));Object.assign(e.types[n],t)},addPrivatePin:function(e,t){t.private=!0,e.pins.push(t)},deletePrivatePin:function(e,t){var n=e.pins.indexOf(e.pins.find((function(e){return e.id===t.id})));e.pins.splice(n,1)},updatePrivatePin:function(e,t){var n=e.pins.indexOf(e.pins.find((function(e){return e.id===t.id})));Object.assign(e.pins[n],t)},addPrivateCategory:function(e,t){t.private=!0,e.categories.push(t)},deletePrivateCategory:function(e,t){var n=e.categories.indexOf(e.categories.find((function(e){return e.id===t.id})));e.categories.splice(n,1)},updatePrivateCategory:function(e,t){var n=e.categories.indexOf(e.categories.find((function(e){return e.id===t.id})));Object.assign(e.categories[n],t)},setPrivateCategories:function(e,t){t.forEach((function(e){e.private=!0})),e.categories=e.categories.concat(t)},setPrivateTypes:function(e,t){t.forEach((function(e){e.private=!0})),e.types=e.types.concat(t)},setPrivatePins:function(e,t){t.forEach((function(e){e.private=!0})),e.pins=e.pins.concat(t)}},actions:{fetchAll:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,t.next=3,n("fetchCategories");case 3:return t.next=5,n("fetchTypes");case 5:return t.next=7,n("fetchPins");case 7:n("loadPrivateData");case 8:case"end":return t.stop()}}),t)})))()},fetchCategories:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,ct.a.get("/categories").then((function(e){var t=e.data.data.categories;t.forEach((function(e){e.private=!1})),n("setCategories",t)}));case 3:case"end":return t.stop()}}),t)})))()},fetchTypes:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,ct.a.get("/types").then((function(e){var t=e.data.data.types;t.forEach((function(e){e.visible=!0,e.private=!1})),n("setTypes",t)}));case 3:case"end":return t.stop()}}),t)})))()},fetchPins:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,ct.a.get("/pins").then((function(e){var t=e.data.data.pins;t.forEach((function(e){e.private=!1})),n("setPins",t)}));case 3:case"end":return t.stop()}}),t)})))()},loadPrivateData:function(e){var t=e.commit,n=localStorage.getItem("privateData");if(n){var i=JSON.parse(n);t("setPrivateCategories",i.categories),t("setPrivateTypes",i.types),t("setPrivatePins",i.pins)}},createNecessaryCategoriesForType:function(e,t){var n=e.state,i=e.commit,a=n.categories.find((function(e){return e.id===t.category.id}));return a||i("addPrivateCategory",t.category),t.categoryId=t.category.id,delete t.category,Promise.resolve()},createNecessaryTypesAndCategoriesForPin:function(e,t){var n=e.state,i=e.commit,a=n.categories.find((function(e){return e.id===t.category.id}));a||i("addPrivateCategory",t.category),t.categoryId=t.category.id;var r=n.types.find((function(e){return e.id===t.type.id})),s=t.type.categoryId===t.category.id;if(r||(t.type.categoryId=t.category.id,i("addPrivateType",t.type)),!s&&r){var c=Object(o["a"])(Object(o["a"])({},t.type),{},{id:"private_".concat(t.type.id),categoryId:t.category.id});t.type=c;var l=n.types.find((function(e){return e.id===c.id}));l||i("addPrivateType",t.type)}return t.typeId=t.type.id,delete t.category,delete t.type,Promise.resolve()},addPrivatePin:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,a=e.dispatch,n.next=3,a("createNecessaryTypesAndCategoriesForPin",t);case 3:i("addPrivatePin",t),a("savePrivateData");case 5:case"end":return n.stop()}}),n)})))()},updatePrivatePin:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.commit,a=e.dispatch,n.next=3,a("createNecessaryTypesAndCategoriesForPin",t);case 3:i("updatePrivatePin",t),a("savePrivateData");case 5:case"end":return n.stop()}}),n)})))()},deletePrivatePin:function(e,t){var n=e.dispatch,i=e.commit;i("deletePrivatePin",t),n("savePrivateData")},updatePrivateType:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.dispatch,a=e.commit,n.next=3,i("createNecessaryCategoriesForType",t);case 3:a("updatePrivateType",t),i("savePrivateData");case 5:case"end":return n.stop()}}),n)})))()},deletePrivateType:function(e,t){var n=e.state,i=e.dispatch,a=e.commit,r=n.pins.filter((function(e){return e.typeId===t.id}));r.forEach((function(e){a("deletePrivatePin",e)})),a("deletePrivateType",t),i("savePrivateData")},updatePrivateCategory:function(e,t){return Object(i["a"])(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:i=e.dispatch,a=e.commit,a("updatePrivateCategory",t),i("savePrivateData");case 3:case"end":return n.stop()}}),n)})))()},deletePrivateCategory:function(e,t){var n=e.state,i=e.dispatch,a=e.commit,r=n.types.filter((function(e){return e.categoryId===t.id}));r.forEach((function(e){var t=n.pins.filter((function(t){return t.typeId===e.id}));t.forEach((function(e){a("deletePrivatePin",e)})),a("deletePrivateType",e)})),a("deletePrivateCategory",t),i("savePrivateData")},savePrivateData:function(e){var t=e.getters;localStorage.setItem("privateData",JSON.stringify({categories:t["privateCategories"],types:t["privateTypes"],pins:t["privatePins"]}))}},getters:{publicCategories:function(e){return e.categories.filter((function(e){return!e.private}))},publicTypes:function(e){return e.types.filter((function(e){return!e.private}))},publicPins:function(e){return e.pins.filter((function(e){return!e.private}))},privateCategories:function(e){return e.categories.filter((function(e){return e.private}))},privateTypes:function(e){return e.types.filter((function(e){return e.private}))},privatePins:function(e){return e.pins.filter((function(e){return e.private}))},getType:function(e){return function(t){return e.types.find((function(e){return e.id===t}))}},getCategoryTypes:function(e){return function(t){return e.types.filter((function(e){return e.categoryId===t}))}},getTypePins:function(e){return function(t){return e.pins.filter((function(e){return e.typeId===t}))}}}},ut={state:function(){return{jwt:void 0,user:void 0,authenticated:!1}},mutations:{setJwt:function(e,t){e.jwt=t},setUser:function(e,t){e.user=t},setAuthenticated:function(e,t){e.authenticated=t}},actions:{refreshToken:function(e){var t=e.commit,n=e.dispatch;return new Promise(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(i,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ct.a.get("/auth/refreshToken",{}).then((function(e){t("setJwt",e.data.token),t("setUser",e.data.user),n("setAuthenticated",!0),i(e)})).catch((function(e){a(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},login:function(e,t){var n=e.commit,a=e.dispatch;return new Promise(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(i,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ct.a.post("/auth/login",Object(o["a"])({},t)).then((function(e){n("setJwt",e.data.token),n("setUser",e.data.user),a("setAuthenticated",!0),a("pushAlert",{title:"Success",text:[e.data.message]}),i(e)})).catch((function(e){var t=e.response.data.errors.map((function(e){return"string"==typeof e?e:e.message}));a("pushAlert",{title:e.response.data.message,text:t}),r(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},register:function(e,t){var n=e.commit,a=e.dispatch;return new Promise(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(i,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ct.a.post("/auth/register",Object(o["a"])({},t)).then((function(e){n("setJwt",e.data.token),n("setUser",e.data.user),a("setAuthenticated",!0),a("pushAlert",{title:"Success",text:[e.data.message]}),i(e)})).catch((function(e){var t=e.response.data.errors.map((function(e){return"string"==typeof e?e:e.message}));a("pushAlert",{title:e.response.data.message,text:t}),r(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},logout:function(e){var t=e.dispatch;return new Promise(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(n,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ct.a.get("/auth/logout",{}).then((function(e){t("setAuthenticated",!1),t("pushAlert",{title:"Success",text:[e.data.message]}),n(e)})).catch((function(e){var n=e.response.data.errors.map((function(e){return"string"==typeof e?e:e.message}));t("pushAlert",{title:e.response.data.message,text:n}),i(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},setAuthenticated:function(e,t){var n=e.commit;n("setAuthenticated",t),t?localStorage.setItem("authenticated","true"):localStorage.removeItem("authenticated")},checkAuthenticated:function(e){var t=e.commit,n=localStorage.getItem("authenticated");return t("setAuthenticated",!!n),Promise.resolve(n)}}},pt={state:function(){return{alerts:[]}},mutations:{pushAlert:function(e,t){e.alerts.unshift(t)},removeAlert:function(e,t){e.alerts=e.alerts.filter((function(e){return e!=t}))}},actions:{pushAlert:function(e,t){var n=e.commit,i=e.dispatch;t.id=Object(z["genRandHex"])(4),n("pushAlert",t),setTimeout((function(){i("removeAlert",t)}),t.time||4e3)},removeAlert:function(e,t){var n=e.commit;n("removeAlert",t)}}};a["a"].use(v["a"]);var dt=new v["a"].Store({state:{mapLocationIndex:0,mapLocations:[{name:"Azura",path:"Azura_WIP.webp"},{name:"Farmlands",path:"Farmlands_WIP.webp"}]},mutations:{setMapLocationIndex:function(e,t){e.mapLocationIndex=t}},actions:{startup:function(e){var t=e.dispatch,n=e.state;return new Promise(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(i,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t("fetchAll");case 2:return e.next=4,t("checkAuthenticated");case 4:n.user.authenticated&&t("refreshToken").catch((function(e){a(e)})),i(null);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}},modules:{pins:lt,user:ut,alerts:pt}});ct.a.defaults.baseURL="/api",ct.a.defaults.validateStatus=function(e){return e>100&&e<400},ct.a.defaults.withCredentials=!0,ct.a.interceptors.request.use((function(e){return void 0!==dt.state.user.jwt&&(e.headers.authorization="Bearer: ".concat(dt.state.user.jwt)),e})),ct.a.interceptors.response.use((function(e){return Promise.resolve(e)}),function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(403!=t.response.status){e.next=5;break}return n=t.response.config,e.next=4,dt.dispatch("refreshToken").catch((function(e){st.currentRoute.path.startsWith("/login")||st.push("/login")}));case 4:return e.abrupt("return",ct()(n));case 5:return e.abrupt("return",Promise.reject(t));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a["a"].config.productionTip=!1,new a["a"]({router:st,store:dt,render:function(e){return e(b)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";n("9c0c")},"5d43":function(e,t,n){},"64ff":function(e,t,n){"use strict";n("e1b4")},"66a7":function(e,t,n){},"6aaf":function(e,t,n){"use strict";n("bcc3")},"6ed5":function(e,t,n){},9824:function(e,t,n){"use strict";n("5d43")},"9c0c":function(e,t,n){},"9d5f":function(e,t,n){},a263:function(e,t,n){},a956:function(e,t,n){},aa18:function(e,t,n){},aae3:function(e,t,n){"use strict";n("5379")},baf6:function(e,t,n){},bcc3:function(e,t,n){},c3ee:function(e,t,n){},e1b4:function(e,t,n){},e1f0:function(e,t,n){},f4e7:function(e,t,n){"use strict";n("2d3e")},f6d0:function(e,t,n){"use strict";n("66a7")},f6dc:function(e,t,n){},fa7d:function(e,t,n){var i=n("448a").default;n("a15b"),n("d81d"),n("d3b7"),n("25f0"),e.exports={genRandHex:function(e){return i(Array(e)).map((function(){return Math.floor(16*Math.random()).toString(16)})).join("")}}}});
//# sourceMappingURL=app.11cfe7c4.js.map